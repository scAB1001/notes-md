Thursday 30/10/2025

---
#### Goals
- Understand the concept of microservices, nanoservices and serverless architectures 
#### Overview
- Recap: SOAs
- Microservices
- Nanoservices
- Serverless Computing
- Function as a Service
- Architectural Support
- Solutions
- Summary
##### Recap - SOAs
• Decentralised middleware.
• Strong emphasis on loose
coupling.
• Adherence to well-
supported standards.
#### Microservices
• A microservice architecture follows an SOA pattern by
breaking a single application into multiple loosely coupled,
independent services yet working with each other.
• Often considered the perfect use case of
containerisation
• Microservices are deployed on separate containers
– E.g. Docker
![[microservices-ex.png]]

**Microservices**
• Smaller-grained services
• Specified Functionality
• Defined Capabilities

**Microservices Architecture**
• Event handler
• Containerisation
• Data processing

**Features**
• Developed and tested in isolation
• Organised by the processes they handle
• Deployed independently

Go from monoliths to microservices
![[monolith-to-microservices.png]]
#### Virtual Machines versus Containers

![[container-arch-ex.png]]![[vm-arch-ex.png]]
Container virtualises the OS rather than the hardware
• Uses a single kernel to run multiple instances of an operating
system
– Each instance runs in a completely isolated environment
– Is secure.
• Can offer greater efficiency and performance than a conventional
hypervisor
##### Applications, Code and Dependencies
*Applications aren’t just code, they have dependencies*
![[separate-apps-and-dependencies.png]]
*Containers turn applications into one deployable artifact*
![[apps-and-dependencies-deployed-as-artifact.png.png]]
##### Containers
▪ Slices up the OS to run multiple apps on a single
Host/Virtual Machine (VM).
▪ Every container gets its
▪ Own root directory, network interface, own process Id
▪ Allows a versioned set of dependencies
(components, runtimes, etc.) to run side-by-side with
another set of dependencies in an isolated runtime
environment on the same Host/VM

Microservices is an architectural design point;
Containers are an implementation detail that often helps.
#### Serverless Computing
• Serverless computing simply means that you, the
developer, do not have to deal with the server.
• A serverless computing platform like Azure
Functions allows you to build your code and
deploy it without ever needing to configure or
manage underlying servers.
• Your unit of deployment is your code; not the
container that hosts the code, or the server that
runs the code, but simply the code itself.

[Def](https://developer.ibm.com/openwhisk/what)
Serverless computing refers to a model where the existence
of servers is simply hidden from developers
• Serverless architecture and Function-as-a-Service (FaaS)
platforms provide for software developers a whole new
world of simplicity, speed and flexibility
• ”Serverless” refers to the software architecture, whereas
“function-as-a-service” describes the key mechanism by
which a developer implements the business logic in that
architecture
#### FaaS: Core of Serverless Computing
**Serverless compute** can be thought of as a function as a service (FaaS), or a **microservice**
that is hosted on a cloud platform.
#### Serverless Computing Execution Model
The serverless computing platform first checks to see if the function is running on
any of its servers. If the function isn't already running, then the platform loads the
function from a data store.
![[serverless-execution-model-ex.png]]
##### 2 scenarios (small overhead to consider)
#### Serverless Computing - Benefits
• No Servers to Manage
• Continuous Scaling
• Dynamic allocation of resources
• Avoid overallocation of resources
• Never Pay for Idle: pay-per-usage
#### Serverless Applications
- Single-function applications: Alexa skills, image resizing, etc.
	Alexa is a serveless computing base - event-driven
- Multiple-function applications: IoT, Image recognition, database analysis, etc.
- Emerging applications: Parallel processing, machine learning
![[serverless-apps-logic-flow.png]]
*2 workflows where each box is a function*

1. (Left) - Different functions being called in a sequential manor
2. (Right) - Event takes place e.g. manager processing employee wages
	- Check, format, write to DB, trigger the data process, write to db again
#### Serverless Functions and Nanoservices
Microservices
• Smaller-grained services
• Specified Functions
• Defined Capabilities

Microservices Architecture
• Event handler
• Serverless back ends
• Data processing

Go from monoliths to microservices to functions (nanoservices)

Serverless functions
• Services that are event-driven and
instantaneously scalable
• flexible (de)composition and
interoperability of software and data
at run-time
![[monolith-to-microservices-to-nanoservices.png]]
##### Performance Issue: Cold start (**not negligible**)
Scenario 1: Serverless function is not running, cold start
Scenario 2: Already in memory, server knows about it, up and running: just need to invoke, warm start
#### Cold Start vs Warm Start
![[cold-vs-warm-serverless-app.png]]
advantages:
- fast startup
- agile deployment
- share memory

Issue:
function is running on server -> warm
start of the container
Function not running -> cold start,
container needs to be instantiated =
overhead

**How long would you keep the function warm?**
As long as you know you need it because using resources is consuming power and accruing costs.
There are default times for serverless app functions to stay warm (~10mins).
#### Serverless Key Metrics
1. Communication Performance
	– Function composition: used for complex serverless applications
	– Examples of composition models: sequence chain
2. Startup Latency: cold vs warm start
	– Startup latency is added to each request processing time
	– Function execution time is usually short (in seconds or milliseconds)
3. Stateless Overhead
	– Explicit State (needed by function logic): being passed using external storage services
	– Implicit State (e.g., session cache): the loss of implicit states might hurt the performance

Functions can share states with eachother through Message Passing.
##### Serverless Architecture Solutions Commercial and Open Source
Amazon Lambda
• IBM Openwhisk
• Google cloud functions
• Microsoft Azure functions
• Apache Openwhisk – initially developed by IBM
• Knative – initially developed by Google (collaboration
with IBM, Pivotal, Red Hat, and SAP)
• OpenFaaS
• Fission
• Other
#### FaaS example: AWS Lambda
![[aws-lambda-ex.png]]
- Event (trigger) based: events can be from
different sources: AWS Services, http-
endpoints, or internal to the app
• Code runs in container: for each lambda
function a container is created

front door’ to the application
• Handles authorisation and access control
• Exposes Lambda functions to front-end
application code
![[aws-lambda-arch-ex.png]]
Amazon replaced containers with firecrackers.
#### Microsoft Azure Functions
https://docs.microsoft.com/azure/azure-functions/functions-overview
- **Azure Functions** is a serverless application **platform**.
- Code implemented in several languages (not only .NET based ones…)
- **Stateless functions** are great candidates for serverless compute; function instances are event-driven, created and destroyed on demand.
- **Triggers** code execution on Azure based on events on Azure, Third-party services or on-premises
	- Time triggers (cron), HTTP triggers, Azure Storage events, Azure SQL Trigger for functions, Azure Queues, messages from Service Bus
- Code can be in several **sources**, including Github so allows continously deployment
##### Running Your Code On-demand
Steps: Create, build, configure, and execute a function JSON configuration specifies
• The function will be triggered when a message is added to a queue named `myqueue-items`
• The return value of the function is then written to outTable in Azure Table storage
![[azure-functions-steps-ex.png]]
##### Function Templates
- Azure provides several **predefined function templates** for common scenarios: Quickstart and custom functions
- When adding your first function, you are presented with the **Add function** pane in which you can select the trigger for your function.
- Selecting a template from the **Add function** pane provides easy access to the most common templates
- When you create a function from a template, several files are created
##### Testing, Monitoring and Application Insights
- Test your function once it is created
- Run it manually
- Test it from within the Azure portal itself
- You can start a function by manually triggering the configured trigger
- The ability to monitor your functions is critical during development and in production.