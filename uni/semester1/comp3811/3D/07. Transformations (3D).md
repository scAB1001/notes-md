Thursday 20/11/2025

---
Mostly relates to the vertex processing stage, shaders too (also extra metadata relatead to input data)

 Code highlighted in yellow has changed (now using 4x4 matrix and vector of 4 too)
 What does `uModelViewProjection` represent?

### Relevant topics
- Handedness of coordinate systems
- Constructing matrices
- Hierarchical transformations
## Spaces
### Model space
Chair example in model (local) space, give it (0, 0, 0) vertex positions (v_model)

### World space
Now put it into world space: positions for each vertex. 
v_world = m_world * v_model

Instancing:
Single object (e.g., this chair) placed multiple times in the scene.
Each instance has a different transformation, but only store one copy of the object’s data.
v_world = m'_world * v_model

### Camera space
View/eye/camera space. Position relative to camera using a transformation.
v_camera = m_camera * v_modelworld

**NEGATIVE COORDINATES ARE IN FRONT OF YOU.**

You are moving the world not the camera.

### Clip space
Unit/clip space: 
We have 3D coordinates but need to fit in space. We go from 3D to 2D but keeping depth along the way to identify objects in the space (which space??)
X TO 1?

Clip space: Clipping takes place here
- Anything outside of the view is discarded
- Fixed function (hardware)
#### OPENGL WILL DO THIS FOR YOU!
Homogenization:
v_ndc = v_clip / v_clip.w

We want pixel coordinates - normalise the ... coordinates and so we perfrom perspective division and are now in 3D again

### Normalized Device Coordinates (NDC) 
E.g. convert (-1, -1, z) to screen coordinates (0, 0, z) - bottom left
#### OPENGL WILL DO THIS FOR YOU!
Viewport transform (scale from NDC to window size) glViewport
## Overview
You can choose to not have some spaces, typically no camera space.

Old OpenGL compresses these into a single MODELVIEW
transform.
(We will also prefer to combine them into a single matrix
when possible.)
- Model space: defined by us
- World space: defined by us
- Camera space: defined by us
- Perspective camera: position, forward, up; field of view; near and far
- Clip space: defined by OpenGL (homogeneous coordinates)

Most of OpenGL is right-handed coordinates system so will have to change the clip space/NDC.
- NDC: defined by OpenGL
	- Always from (-1, -1, -1) to (+1, +1, +1). *Unit cube*, Left-handed
	- Vulkan: (-1, -1, **0**) to (+1, +1, +1). Right-handed
### Left-handed vs. Right-handed
- Determines orientation of axes relative to each other
- RH: Default coordinate system in e.g. physics
- (Except when torturing students with mirrors…)
- Most of OpenGL, all(?) of Vulkan
- DirectX: left handed :-)
- Less important in modern APIs
(adjust in vertex shader/projection)
![[right-hand-rule.png]]
### Screen space: scaled + translated version of NDC
- To “pixel” coordinates
- (0,0) to (w,h)
- For 1920 x 1080: (0,0) to (1920, 1080) exclusive
Defined by viewport: ```C++
glViewport x, y, width, height )
	x_window = x_ndc + 1 * width/2 + x
	y_window = y_ndc + 1 * width/2 + y
	```