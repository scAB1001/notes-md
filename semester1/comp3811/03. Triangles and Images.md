Thursday 23/10/25

---
#### Triangle
- In 3D: We will define facing based on order of vertices
- CCW is by default front facing, CW is back facing
- Typically cull (=discard) back facing triangles for efficiency
- This is configurable, however
- Can set CW to be front facing, CCW back facing
- Can also choose to cull front facing triangles, none, or both

Half-plane test, you get to choose
- Inside: positive sign
- Outside: negative sign
- Either: all tests have the same sign
##### Generalization
- Approach with half-plane works for any convex shape
- Extends into 3D
- kDOP? (discrete oriented polytope = set of oriented slabs)

Rasterizing triangles
- Can tell if point is in triangle. E.g. half-plane test.
- Last time: “pixels = center samples”
- Test each sample position
	- Maybe a bit overkill?
- Can reduce number quite a bit (But still some unnecessary tests.)

Variations of this are common
- Raster stamp on GPUs
- “Larrabee” hierarchical rasterization

Compare: implicit vs explicit
- More like implicit: test points against triangle
- Explicit: enumerate points in triangle?
### Barycentric coordinates
In computer graphics, barycentric coordinates are ==used to represent a point's position within a triangle as a weighted average of its vertices==, allowing for operations like texture mapping and color interpolation. 
- This system is useful for tasks such as rasterization, determining if a point is inside a triangle, and applying lighting or shading across its surface. 
- The coordinates (α,β,γ) are defined such that they sum to 1 (α+β+γ=1) and are all non-negative (α,β,γ≥0)
- Linear interpolation across triangle
- 𝐶𝑃 = 𝛼 𝐶0 + 𝛽 𝐶1 + 𝛾 𝐶2
#### Interpolation
- Arbitrary “attributes”
- Easy to show with colors
- Depth (for depth buffering / hidden surface removal)
- Texture coordinates (for texture mapping)
- Surface normals (for lighting)
- Tangent space bases (for normal mapping)
- Note: 3D: need to correct for perspective. (extra interpolation)
##### Equation: 𝐶𝒙 = 𝛼 𝐶𝑜 + 𝛽 𝐶1 + 𝛾 𝐶2
Properties:
- Each of 𝛼, 𝛽 and 𝛾 should be in the range [0 … 1]
	- 𝛼 + 𝛽 + 𝛾 = 1, 𝛼 < 1, 𝛽 < 1, 𝛾 < 1
- First property: inside of space spanned by 𝐶𝑜, 𝐶1 and 𝐶2
- Second property: conserve “energy”
#### Sketch
- Line: 1 − 𝑡 𝑃 + 𝑡 𝑄, 𝑡 ∈ [0 … 1]
- Works for any point V in triangle
![[drawing-triangles-ex.png]]
𝑉 = (1 − 𝑠) 𝐶 + 𝑠 𝑈
𝑉 = (1 − 𝑠) 𝐶 + 𝑠 ((1 − 𝑡) 𝐴 + 𝑡 𝐵)
𝑉 = (1 − 𝑠) 𝐶 + (1 − 𝑡) 𝑠 𝐴 + 𝑠 𝑡 𝐵
𝑉 = 𝛾 𝐶 + 𝛼 𝐴 + 𝛽 𝐵, with 𝛼 = (1 − t) s, 𝛽 = 𝑠 𝑡 and 𝛾 = (1 − s)
#### Barycentric coordinates
- Properties: 𝛼, 𝛽, 𝛾 ∈ 0 … 1 and 𝛼 + 𝛽 + 𝛾 = 1 with 𝛼 = 1 − t s, 𝛽 = 𝑠 𝑡 and 𝛾 = (1 − s)

The barycentric coordinates of a point are 𝛼, 𝛽, 𝛾
- Relative to a specific triangle ABC
- 𝛼, 𝛽, 𝛾 ∈ [0 … 1]
- 𝛼 + 𝛽 + 𝛾 = 1
- The properties also imply 𝛾 = 1 − 𝛼 − 𝛽

Given a point X: can we compute its barycentric coordinate?
Different geometric interpretation
- We’ve already seen one
- Original triangle: ABC
- Subtriangles ABU, BCU, AUC

This gives us one way to compute barycentric coodinates
- Given point U, compute the four areas and perform the divisions
(Sanity check: no divisions by zero unless the original triangle is
degenerate)
- Triangle area with sine rule
𝐴𝑟𝑒𝑎_𝐴𝐵𝐶 = $\frac {\lVert u \rVert \cdot \lVert v \rVert \cdot sin 𝜃}{2}$

Sine is expensive to evaluate, so don’t like that.
- Trick: Cross product
$u \cdot p = \lVert u \rVert \cdot \lVert v \rVert \cdot sin 𝜃 \cdot n$
- Cross product is a vector (hence the multiplication by n, n unit length)
- But:
$\lVert u \cdot p \rVert = \lVert u \rVert \cdot \lVert v \rVert \cdot \lvert sin 𝜃 \rvert$
which is pretty much what we’re looking for.
#### How they are used in graphics?
- **Interpolation:**    
For any point P inside a triangle defined by vertices A, B, and C, its position can be expressed as
𝑃=𝛼𝐴+𝛽𝐵+𝛾𝐶
This equation allows for smooth interpolation of other values, such as color or texture coordinates, across the triangle's surface by interpolating the vertex values using the same barycentric weights. 

- **Point-in-triangle tests:-**
A point is inside or on the boundary of a triangle if and only if its barycentric coordinates are all non-negative and sum to 1. This is a fundamental check used in rasterization to determine which pixels to draw. 

- **[Ray-triangle intersection](https://www.google.com/search?client=firefox-b-lm&channel=entpr&cs=1&sca_esv=bf302389b4c6e1ea&sxsrf=AE3TifMr4pYdnAGFxxTztBIKTgAo6UX29Q%3A1761209066736&q=Ray-triangle+intersection&sa=X&ved=2ahUKEwjG6fGF97mQAxVnUEEAHTZ6Pa4QxccNegQIExAB&mstk=AUtExfAbrTdn-LDU7QimOHgp-wQtdFVfa2eTWNpOdrvIcxPHSz9Y1zkrOuvZsLS7DBKxrjb2RvMi6dC7RMQAuqbJRS2LQi5kMPUjH0xi2lMlaf_j6aW9EvdwH29tIP0TskOFk0laZywcc40DexzOiVJKjcSsf0cICBq_t0Z7JskMDN3HPBw&csui=3):**
Barycentric coordinates are a key component of efficient ray-triangle intersection algorithms, such as the Möller-Trumbore algorithm. 

- **Shading:**
They are used to apply lighting and shading effects. For example, the normal vector or other material properties can be interpolated across the surface to create realistic shading. 

- **Texture mapping:**
Barycentric coordinates are essential for mapping textures onto triangles, as they provide a way to find the correct texture coordinate for any point within the triangle. 

- **Surface modeling:**
They are used in computer-aided design for defining and manipulating surfaces, such as [Bézier surfaces](https://www.google.com/search?client=firefox-b-lm&channel=entpr&cs=1&sca_esv=bf302389b4c6e1ea&sxsrf=AE3TifMr4pYdnAGFxxTztBIKTgAo6UX29Q%3A1761209066736&q=B%C3%A9zier+surfaces&sa=X&ved=2ahUKEwjG6fGF97mQAxVnUEEAHTZ6Pa4QxccNegQIJRAB&mstk=AUtExfAbrTdn-LDU7QimOHgp-wQtdFVfa2eTWNpOdrvIcxPHSz9Y1zkrOuvZsLS7DBKxrjb2RvMi6dC7RMQAuqbJRS2LQi5kMPUjH0xi2lMlaf_j6aW9EvdwH29tIP0TskOFk0laZywcc40DexzOiVJKjcSsf0cICBq_t0Z7JskMDN3HPBw&csui=3). 
Barycentric coordinate system - Wikipedia
Barycentric coordinates are particularly useful in triangle geometry for studying properties that do not depend on the angles of the triangle
* We call p the Phong exponent p is also referred to as the shininess value and is treated as a propety of the surface material.
#### Mathematical representation
- **Vertices:** Let the vertices of a triangle be A, B, and C.
- **Point:** Let P be a point within or on the triangle.
- **Coordinates:** P can be expressed as a weighted average of the vertices: 𝑃=𝛼𝐴+𝛽𝐵+𝛾𝐶. 
- **Constraint:** The weights must satisfy the conditions: 𝛼+𝛽+𝛾=1 and 𝛼,𝛽,𝛾≥0. 
- **Alternative view:** The coordinates can also be thought of as the ratio of the areas of the sub-triangles formed by the point P and the triangle's edges. 
- For a point P inside triangle ABC, the barycentric coordinates are (𝛼,𝛽,𝛾) = 
	(𝐴𝑟𝑒𝑎(𝑃𝐵𝐶)/𝐴𝑟𝑒𝑎(𝐴𝐵𝐶), 𝐴𝑟𝑒𝑎(𝑃𝐴𝐶)/𝐴𝑟𝑒𝑎(𝐴𝐵𝐶), 𝐴𝑟𝑒𝑎(𝑃𝐴𝐵)/𝐴𝑟𝑒𝑎(𝐴𝐵𝐶)), which is why they are also called [areal coordinates](https://www.google.com/search?client=firefox-b-lm&channel=entpr&cs=1&sca_esv=bf302389b4c6e1ea&sxsrf=AE3TifMr4pYdnAGFxxTztBIKTgAo6UX29Q%3A1761209066736&q=areal+coordinates&sa=X&ved=2ahUKEwjG6fGF97mQAxVnUEEAHTZ6Pa4QxccNegQIRBAC&mstk=AUtExfAbrTdn-LDU7QimOHgp-wQtdFVfa2eTWNpOdrvIcxPHSz9Y1zkrOuvZsLS7DBKxrjb2RvMi6dC7RMQAuqbJRS2LQi5kMPUjH0xi2lMlaf_j6aW9EvdwH29tIP0TskOFk0laZywcc40DexzOiVJKjcSsf0cICBq_t0Z7JskMDN3HPBw&csui=3).