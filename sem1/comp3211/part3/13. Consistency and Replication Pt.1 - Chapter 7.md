Repeat. 
Goals: understand principles behind consistency and replication Outline:
Outline:
## 13. Consistency and Replication Pt.1 - Chapter 7
### Client-centric consistency models
#### Basic Architecture
#### Monotonic Reads
#### Monotonic Writes
#### Read Your Writes
### Replica management
#### Content Replication
#### Server-Initiated Replica Example
#### Consistency Protocols: Primary-backup Protocol Example
#### Consistency Protocols: Primary-backup Protocol with Local Writes
Content:
### Client-centric consistency models
Consider a distrbuted db where only accessed by a notebook which is the front end to your db.
At location A you access the db doing reads and updates.
At location B you continue your work but unless you access the same server as location A, you may detect inconsistencies:
- updates at A may not have been propagated to B
- you may be reading new entries than the ones available at A
- updates may eventually conflict with A's
All you want is a db that appears consistent to you, where entries updated/read at A, are in B the way you left them in A.
#### Basic Architecture
![[client-centric-arch.png]]
Provides guarantees for a single client concerning the consistency
of accesses to a data store by that client
• No guarantees are given concerning concurrent accesses by
different clients.
• If P1 modifies data that is shared with P2 but which is stored at a
different location, write-write conflicts may easily be created.

$x_i$ denotes the version of data item $x$, $L_k$ denotes the local store $k$.
$$\begin{align}
W_1(x_2) \text{ is the write op by } P_1 \text{, leads to version } x_2 \text{ of } x \\
W_1(x_i;x_j) \text{ indicates } P_1 \text{ produces version } x_j \text{ based on previous } x_i \\
W_1(x_i;x_j) \text{ indicates } P_1 \text{ produces version } x_j \text{ concurrently to } x_i
\end{align}$$
#### Monotonic Reads (MRs)
If a process reads the value of data item x, any successive read op on x by that process will always return that same or most recent value.

The read ops performed by a single process P at two different local copies of the same data store. a) A monotonic read consistent data store b) A data store that does not provide monotonic reads.
(**Example1**) a distributed e-mail database
![[monotonic-read-ex-1.png]]
• W2(x1|x2) at L2 is known to produce a version that does not follow from x1
• Consequence, P1’s read operation at L2 is known not to include the effect of the
write operations when it performed R1(x1) at location L1.

(**Example2**) Automatically reading you personal calnedar updates from diff servers.
MRs guarantees that the user sees all updates, no matter which automatic read takes place. 

(**Example3**) Reading (no modification) incoming mail while you are mobile. Each time you connect to a diff e-mail server, that server fetches (at least) al the updates from the server you previously visited.
#### Monotonic Writes (MWs)
A write op by a process on a data itme 
#### Read Your Writes
### Replica management
#### Content Replication
#### Server-Initiated Replica Example
#### Consistency Protocols: Primary-backup Protocol Example
#### Consistency Protocols: Primary-backup Protocol with Local Writes